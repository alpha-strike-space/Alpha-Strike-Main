import{b as f,z as p,A as h,y as E}from"./common-D03AcIOE.js";let u=!1,a=null,l=null,t=null;function s(){!a||!l||(a.style.display="none",l.classList.remove("visible"))}function b(){if(u)return;a=document.createElement("div"),a.className="modal-backdrop",l=document.createElement("div"),l.className="modal-container modal-container--scrollable";const n=document.createElement("div");n.className="modal-header";const r=document.createElement("i");r.className="fa-solid fa-users";const i=document.createElement("h3"),c=document.createElement("i");c.className="fa-solid fa-xmark modal-close-icon",c.style.cursor="pointer",c.setAttribute("aria-label","Close"),c.addEventListener("click",()=>{s()}),i.className="modal-title",i.textContent="Characters in Tribe",n.appendChild(r),n.appendChild(i),n.appendChild(c);const o=document.createElement("div");o.className="modal-body";const e=document.createElement("div");e.className="modal-scroll",t=document.createElement("div"),t.className="modal-character-list",e.appendChild(t),o.appendChild(e),l.appendChild(n),l.appendChild(o),a.appendChild(l),document.body.appendChild(a),a.addEventListener("click",d=>{d.target===a&&s()}),document.addEventListener("keydown",d=>{a.style.display!=="none"&&d.key==="Escape"&&s()}),u=!0}async function y(n){b(),a.style.display="flex",requestAnimationFrame(()=>l.classList.add("visible")),t&&(t.innerHTML=""),f(t,"Loading Characters...");try{const i=(await p(n,1,0)).member_count||0,c=await p(n,i,0);h(t),(c.members||[]).forEach(o=>{const e=document.createElement("div");e.className="modal-character-item",e.style="margin: 0 1rem";const d=document.createElement("span");d.className="modal-character-name",d.textContent=o.member_name;const m=document.createElement("i");m.className="fa-sharp fa-solid fa-arrow-up-right-from-square",e.appendChild(d),e.appendChild(m),e.title=`Search for ${o.member_name}`,e.addEventListener("click",()=>{E(o.member_name,"name")}),t.appendChild(e)})}catch(r){console.error("Failed to load tribe characters",r),h(t),t.textContent="Failed to load characters."}}export{y as showTribeCharacterModal};
