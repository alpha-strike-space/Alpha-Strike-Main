(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))i(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function a(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerPolicy&&(s.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?s.credentials="include":t.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(t){if(t.ep)return;t.ep=!0;const s=a(t);fetch(t.href,s)}})();function A(e){const n=document.getElementById("navigation-container");if(n){const i=window.location.pathname.endsWith("index.html")||window.location.pathname==="/"||window.location.pathname.endsWith("/Alpha-Strike-Main/")?"":"../";n.innerHTML=`
      <div class="topnav" id="myTopnav">
        <a href="${i}index.html" class="nav-logo alpha-strike-logo">
            Alpha-Strike
        </a>
        <button class="hamburger-menu" id="hamburgerBtn" aria-label="Toggle menu" aria-expanded="false" aria-controls="topnavLinks">
            <i class="fas fa-bars" aria-hidden="true"></i>
        </button>
        <div class="topnav-links" id="topnavLinks">
            <a ${e==="home"?'class="active"':""} href="${i}index.html"><i class="fa-sharp fa-solid fa-trophy"></i> <span data-translate="navbar.home">Recently Stamped</span></a>
            <a ${e==="killers"?'class="active"':""} href="${i}pages/killers.html"><i class="fa-solid fa-skull-crossbones"></i> <span data-translate="navbar.killers">Leading Killers</span></a>
            <a ${e==="victims"?'class="active"':""} href="${i}pages/victims.html"><i class="fa-solid fa-user-shield"></i> <span data-translate="navbar.victims">Leading Victims</span></a>
            <a ${e==="systems"?'class="active"':""} href="${i}pages/systems.html"><i class="fa-solid fa-map-location-dot"></i> <span data-translate="navbar.systems">Leading Systems</span></a>
            <a ${e==="search"?'class="active"':""} href="${i}pages/search.html"><i class="fa-solid fa-magnifying-glass"></i> <span data-translate="navbar.search">Search</span></a>
            <button id="animatedLangBtn" class="lang-btn-nav">EN</button>
        </div>
      </div>
    `;const t=document.getElementById("hamburgerBtn"),s=document.getElementById("topnavLinks"),o=document.getElementById("myTopnav"),r=t.querySelector("i");t&&s&&o&&r?t.addEventListener("click",()=>{s.classList.toggle("open"),o.classList.toggle("open");const l=s.classList.contains("open");t.setAttribute("aria-expanded",l.toString()),l?(r.classList.remove("fa-bars"),r.classList.add("fa-times")):(r.classList.remove("fa-times"),r.classList.add("fa-bars"))}):console.error("Hamburger menu elements not found. Navigation interactivity may be affected.")}else console.error("Navigation container #navigation-container not found.")}let f={};const d=["en","es","ru","zh"];let g=0;function L(e){document.documentElement.lang=e,localStorage.setItem("preferredLanguage",e),[...document.querySelectorAll("[data-translate]")].map(t=>{const s=t.getAttribute("data-translate"),o=f[s],r=o&&(o[e]||o.en)||s;if(r)if(t.tagName==="INPUT"&&t.placeholder!==void 0&&(s.includes(".placeholder")||s.endsWith("Placeholder")))t.placeholder=r;else if(t.tagName==="BUTTON"||t.classList.contains("timezone-toggle-floating")){const l=t.querySelector("i"),c=t.querySelector("span[data-translate]");c&&c.getAttribute("data-translate")===s?c.textContent=r:l?t.innerHTML=`${l.outerHTML} ${r}`:t.textContent=r}else{const l=t.firstChild;l&&l.nodeType===Node.ELEMENT_NODE&&l.tagName==="I"?t.innerHTML=`${l.outerHTML} ${r}`:t.textContent=r}});const a=document.getElementById("animatedLangBtn");if(a){const t=a.querySelector("i.fa-globe"),s=t?`${t.outerHTML} `:"";a.innerHTML=`${s}${e.toUpperCase()}`}const i=d.indexOf(e);i!==-1&&(g=i),window.AlphaStrike&&typeof window.AlphaStrike.onLanguageChangeRenderContent=="function"&&(console.log("Calling window.AlphaStrike.onLanguageChangeRenderContent() due to language change."),window.AlphaStrike.onLanguageChangeRenderContent())}function P(){g=(g+1)%d.length;const e=d[g];L(e)}function x(){const e=document.getElementById("animatedLangBtn");if(e){const n=localStorage.getItem("preferredLanguage")||d[0],a=e.querySelector("i.fa-globe"),i=a?`${a.outerHTML} `:'<i class="fas fa-globe"></i> ';e.innerHTML=`${i}${n.toUpperCase()}`,e.addEventListener("click",P)}else console.warn("#animatedLangBtn not found during language switcher initialization.")}async function _(){try{let e="";window.location.pathname.includes("/pages/")?e="../":(window.location.pathname.endsWith("/")||window.location.pathname.endsWith(".html"))&&(e="./");const n=await fetch(`${e}localization/translations.json`);if(!n.ok)throw new Error(`HTTP error! status: ${n.status} for translations.json at ${e}localization/translations.json`);f=await n.json(),console.log("Translations loaded successfully.")}catch(e){console.error("Failed to load translations:",e),f={"error.loading":{en:"Error loading translations",es:"Error al cargar las traducciones",ru:"Ошибка загрузки переводов",zh:"加载翻译时出错"}}}}document.addEventListener("DOMContentLoaded",async()=>{await _();const e=localStorage.getItem("preferredLanguage")||d[0],n=d.indexOf(e);n!==-1?g=n:g=0,L(d[g])});let m=!0;function B(e,n=!0){let a;if(typeof e=="string")a=new Date(e);else if(typeof e=="number")if(e<1e10)a=new Date(e*1e3);else if(e<1e13)a=new Date(e);else{const u=e/1e4-116444736e5;a=new Date(u)}if(!a||Number.isNaN(a.getTime())||a.getFullYear()>2100||a.getFullYear()<1970)return console.warn("Invalid timestamp:",e),"INVALID TIMESTAMP";if(n){const c=a.getFullYear(),p=String(a.getMonth()+1).padStart(2,"0"),u=String(a.getDate()).padStart(2,"0"),y=String(a.getHours()).padStart(2,"0"),w=String(a.getMinutes()).padStart(2,"0"),v=String(a.getSeconds()).padStart(2,"0"),S=a.toLocaleTimeString("en-US",{timeZoneName:"short"}).split(" ")[2];return`${c}.${p}.${u} - ${y}:${w}:${v} ${S}`}const i=a.getUTCFullYear(),t=String(a.getUTCMonth()+1).padStart(2,"0"),s=String(a.getUTCDate()).padStart(2,"0"),o=String(a.getUTCHours()).padStart(2,"0"),r=String(a.getUTCMinutes()).padStart(2,"0"),l=String(a.getUTCSeconds()).padStart(2,"0");return`${i}.${t}.${s} - ${o}:${r}:${l} UTC`}function O(){m=!m;const e=document.documentElement.lang||(typeof d<"u"?d[0]:"en");[...document.querySelectorAll(".timestamp-value")].map(t=>{const s=t.closest(".incident-list-item");s!=null&&s.dataset.timestamp&&(t.textContent=B(typeof s.dataset.timestamp=="string"&&!Number.isNaN(s.dataset.timestamp)?Number(s.dataset.timestamp):s.dataset.timestamp,m))});const a=document.getElementById("timezone-toggle");if(a){const t=a.querySelector("span[data-translate]");if(t){const s=m?"timezone.showUtc":"timezone.showLocal";t.setAttribute("data-translate",s);const o=f[s],r=o?o[e]:void 0;r?t.textContent=r:(t.textContent=o?o.en:s,console.warn(`Translation not found for key: ${s}, lang: ${e}. Using fallback.`))}}[...document.querySelectorAll(".timestamp-group .detail-label")].map(t=>{const s=m?"card.localTimeLabel":"card.utcTimeLabel";if(t.setAttribute("data-translate",s),typeof f<"u"&&f[s]&&f[s][e])t.textContent=f[s][e];else{let o=s.replace("card.","").replace("Label","");o=`${o.charAt(0).toUpperCase()+o.slice(1)} TIME:`,t.textContent=o,console.warn(`Translation not found for key: ${s}, lang: ${e}. Using fallback.`)}}),window.AlphaStrike&&typeof window.AlphaStrike.onLanguageChangeRenderContent=="function"&&(console.log("ToggleTimezone: Calling page-specific render function."),window.AlphaStrike.onLanguageChangeRenderContent())}function H(e){let n;if(typeof e=="string")n=new Date(e);else if(typeof e=="number")if(e<1e10)n=new Date(e*1e3);else if(e<1e13)n=new Date(e);else{const c=e/1e4-116444736e5;n=new Date(c)}if(!n||Number.isNaN(n.getTime())||n.getFullYear()>2100||n.getFullYear()<1970)return"";const i=new Date-n;if(i<0)return"";const t=Math.floor(i/(1e3*60*60*24)),s=Math.floor(i%(1e3*60*60*24)/(1e3*60*60)),o=Math.floor(i%(1e3*60*60)/(1e3*60));return t>0?`${t}d ${s}h ago`:s>0?`${s}h ${o}m ago`:o>0?`${o}m ago`:"Just now"}function F(e){if(!e||typeof e!="object")return console.warn("Invalid item passed to createIncidentCard:",e),null;if(e.id===void 0||e.id===null)return console.warn("Skipping card creation for item missing 'id':",e),null;if(!e.killer_name&&!e.victim_name&&!e.loss_type&&!e.solar_system_name&&!e.time_stamp)return console.warn("Skipping card creation for item with many essential fields missing (excluding id check):",e),null;const a=document.createElement("div");a.classList.add("incident-list-item"),e.time_stamp&&(a.dataset.timestamp=typeof e.time_stamp=="string"&&!Number.isNaN(e.time_stamp)?Number(e.time_stamp):e.time_stamp);const i=window.location.pathname.endsWith("index.html")||window.location.pathname==="/"||window.location.pathname.endsWith("/Alpha-Strike-Main/"),t=i?"./":"../",s=i?"pages/":"",o=e.time_stamp?B(e.time_stamp,m):"N/A",r=e.time_stamp?H(e.time_stamp):"",l=m?"card.localTimeLabel":"card.utcTimeLabel",c=`${t}assets/images/awakened.avif`,p=localStorage.getItem("preferredLanguage")||"en";function u(b,N={},U=""){var I,C;let $=U;typeof f<"u"&&((I=f[b])!=null&&I[p])?$=f[b][p]:typeof f<"u"&&((C=f[b])!=null&&C.en)&&($=f[b].en);for(const E in N)$=$.replace(`{${E}}`,N[E]);return $}const y=e.killer_name||"UNKNOWN",w=e.victim_name||"UNKNOWN",v=e.solar_system_name||"UNKNOWN";let S="";const T=e.id,k=u("tooltip.viewKillmailDetails",{killmailId:T},`View details for killmail ${T}`);return S=`
      <div class="incident-detail-link-container">
          <a href="${s}killmail.html?mail_id=${encodeURIComponent(T)}"
             class="view-killmail-details-link icon-only-link"
             aria-label="${k}"
             title="${k}">
             <i class="fa-sharp fa-solid fa-arrow-up-right-from-square"></i>
          </a>
      </div>
  `,a.innerHTML=`
        <div class="incident-photos">
            <div class="photo-container killer-photo">
                <img src="${c}" alt="Aggressor" class="combatant-photo"/>
            </div>
            <div class="vs-indicator"><i class="fas fa-bolt"></i></div>
            <div class="photo-container victim-photo">
                <img src="${c}" alt="Victim" class="combatant-photo"/>
            </div>
        </div>
        <div class="incident-combatants">
            <div class="combatant-info killer-info">
                <span class="combatant-label" data-translate="card.aggressor"></span>
                <span class="combatant-name killer clickable-name" data-name="${y}" title="${u("tooltip.searchFor",{itemName:y},`Search for ${y}`)}">${y}<i class="fa-sharp fa-solid fa-arrow-up-right-from-square"></i></span>
            </div>
            <div class="combatant-info victim-info">
                <span class="combatant-label" data-translate="card.casualty"></span>
                <span class="combatant-name victim clickable-name" data-name="${w}" title="${u("tooltip.searchFor",{itemName:w},`Search for ${w}`)}">${w}<i class="fa-sharp fa-solid fa-arrow-up-right-from-square"></i></span>
            </div>
        </div>
        <div class="incident-details-compact">
            <div class="detail-group">
                <span class="detail-label" data-translate="card.lossType"></span>
                <span class="detail-value">${e.loss_type||"CLASSIFIED"}</span>
            </div>
            <div class="detail-group">
                <span class="detail-label" data-translate="card.location"></span>
                <span class="detail-value clickable-system" data-system="${v}" title="${u("tooltip.searchFor",{itemName:v},`Search for ${v}`)}">${v}<i class="fa-sharp fa-solid fa-arrow-up-right-from-square"></i></span>
            </div>
        </div>
        <div class="incident-timestamp">
            <div class="timestamp-group">
                <span class="detail-label timestamp-label" data-translate="${l}"></span>
                <span class="timestamp-value">${o}</span>
                ${r?`<span class="time-elapsed">${r}</span>`:""}
            </div>
        </div>
        ${S}
    `,a}function D(e,n){if(!e||e==="UNKNOWN"||e==="CLASSIFIED"){console.warn("Cannot search for empty, unknown, or classified values");return}const t=`${window.location.pathname.endsWith("index.html")||window.location.pathname==="/"||window.location.pathname.endsWith("/Alpha-Strike-Main/")?"pages/search.html":window.location.pathname.includes("/pages/")?"search.html":"../pages/search.html"}?query=${encodeURIComponent(e)}&type=${n}`;window.location.href=t}function M(){for(const e of document.querySelectorAll(".clickable-name"))e.dataset.listenerAttached||(e.addEventListener("click",n=>{n.preventDefault();const a=e.dataset.name;a&&a!=="UNKNOWN"&&D(a,"name")}),e.dataset.listenerAttached="true");for(const e of document.querySelectorAll(".clickable-system"))e.dataset.listenerAttached||(e.addEventListener("click",n=>{n.preventDefault();const a=e.dataset.system;a&&a!=="UNKNOWN"&&D(a,"system")}),e.dataset.listenerAttached="true")}function W(e){if(typeof A=="function")A(e);else{console.error("initializeNavigation function is not defined. Ensure components/navigation.js is loaded.");return}typeof x=="function"?x():console.error("initializeLanguageSwitcher function not found. Ensure translation-dictionary.js is loaded correctly and defines it.");const n=document.getElementById("timezone-toggle");if(n&&(n.hasAttribute("data-listener-attached")||(n.addEventListener("click",O),n.setAttribute("data-listener-attached","true"))),typeof L=="function"&&typeof d<"u"&&d.length>0){const a=localStorage.getItem("preferredLanguage")||d[0];L(a)}else console.error("setLanguage function or languages array not found. Translation system might not be fully initialized.")}function K(e,n,a,i={}){const t=document.getElementById(n);if(!t){console.error(`Container with ID ${n} not found`);return}if(t.innerHTML="",!e||e.length===0){t.textContent=i.noDataMessage||"No data available.";return}i.sortBy&&i.sortDirection&&e.sort((o,r)=>{const l=o&&typeof o=="object"&&Object.prototype.hasOwnProperty.call(o,i.sortBy)?o[i.sortBy]:void 0,c=r&&typeof r=="object"&&Object.prototype.hasOwnProperty.call(r,i.sortBy)?r[i.sortBy]:void 0;if(l==null)return i.sortDirection==="desc"?1:-1;if(c==null)return i.sortDirection==="desc"?-1:1;let p=0;return l>c?p=1:l<c&&(p=-1),i.sortDirection==="desc"?p*-1:p});let s=e;if(i.limit&&(s=e.slice(0,i.limit)),[...s].map(o=>{const r=a(o);r?t.appendChild(r):console.warn("Skipping invalid card for item:",o)}),typeof M=="function"&&M(),typeof L=="function"&&typeof d<"u"&&d.length>0){const o=localStorage.getItem("preferredLanguage")||d[0];L(o)}}async function h(e){try{const n=await fetch(e);if(!n.ok)throw new Error(`HTTP error! Status: ${n.status}`);const a=await n.json();return console.log("API Response Data:",a),a}catch(n){throw console.error("Error fetching data:",n),n}}async function R(){return await h("https://api.alpha-strike.space/incident?filter=month")}async function j(e){return await h(`https://api.alpha-strike.space/incident?mail_id=${e}`)}async function q(e="month"){return await h(`https://api.alpha-strike.space/totals?filter=${e}`)}async function Y(e="week"){return await h(`https://api.alpha-strike.space/totals?filter=${e}`)}async function V(e="day"){return await h(`https://api.alpha-strike.space/totals?filter=${e}`)}async function Z(e,n){const a=n==="system"?`https://api.alpha-strike.space/incident?system=${encodeURIComponent(e)}`:`https://api.alpha-strike.space/incident?name=${encodeURIComponent(e)}`;return await h(a)}async function J(e,n){const a=n==="system"?`https://api.alpha-strike.space/totals?system=${encodeURIComponent(e)}`:`https://api.alpha-strike.space/totals?name=${encodeURIComponent(e)}`;return await h(a)}export{d as a,j as b,F as c,K as d,B as e,R as f,m as g,M as h,W as i,g as j,Z as k,_ as l,J as m,V as n,Y as o,q as p,D as q,L as s,f as t};
