(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function a(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(n){if(n.ep)return;n.ep=!0;const o=a(n);fetch(n.href,o)}})();function M(e){const t=document.getElementById("navigation-container");if(t){const s=window.location.pathname.endsWith("index.html")||window.location.pathname==="/"||window.location.pathname.endsWith("/Alpha-Strike-Main/")?"":"../";t.innerHTML=`
      <div class="topnav" id="myTopnav">
        <a href="${s}index.html" class="nav-logo alpha-strike-logo">
            Alpha-Strike
        </a>
        <button class="hamburger-menu" id="hamburgerBtn" aria-label="Toggle menu" aria-expanded="false" aria-controls="topnavLinks">
            <i class="fas fa-bars" aria-hidden="true"></i>
        </button>
        <div class="topnav-links" id="topnavLinks">
            <a ${e==="home"?'class="active"':""} href="${s}index.html"><i class="fa-sharp fa-solid fa-trophy"></i> <span data-translate="navbar.home">Recently Stamped</span></a>
            <a ${e==="killers"?'class="active"':""} href="${s}pages/killers.html"><i class="fa-solid fa-skull-crossbones"></i> <span data-translate="navbar.killers">Leading Killers</span></a>
            <a ${e==="victims"?'class="active"':""} href="${s}pages/victims.html"><i class="fa-solid fa-user-shield"></i> <span data-translate="navbar.victims">Leading Victims</span></a>
            <a ${e==="systems"?'class="active"':""} href="${s}pages/systems.html"><i class="fa-solid fa-map-location-dot"></i> <span data-translate="navbar.systems">Leading Systems</span></a>
            <div class="nav-search-container">
                <button id="navSearchToggle" class="nav-search-toggle" aria-label="Toggle search">
                    <i class="fa-solid fa-magnifying-glass"></i>
                </button>
                <div id="navSearchDropdown" class="nav-search-dropdown">
                    <div class="nav-search">
                        <select id="navSearchType">
                            <option value="name" data-translate="search.byName">Character</option>
                            <option value="system" data-translate="search.bySystem">System</option>
                        </select>
                        <input type="text" id="navSearchQuery" placeholder="Search..." data-translate="search.placeholder" />
                        <button id="navSearchBtn" aria-label="Search">
                            <i class="fa-solid fa-magnifying-glass"></i>
                        </button>
                    </div>
                </div>
            </div>
            <button id="animatedLangBtn" class="lang-btn-nav">EN</button>
        </div>
      </div>
    `;const n=document.getElementById("hamburgerBtn"),o=document.getElementById("topnavLinks"),i=document.getElementById("myTopnav"),r=n.querySelector("i");n&&o&&i&&r?n.addEventListener("click",()=>{o.classList.toggle("open"),i.classList.toggle("open");const d=o.classList.contains("open");n.setAttribute("aria-expanded",d.toString()),d?(r.classList.remove("fa-bars"),r.classList.add("fa-times")):(r.classList.remove("fa-times"),r.classList.add("fa-bars"))}):console.error("Hamburger menu elements not found. Navigation interactivity may be affected."),document.addEventListener("click",d=>{const m=document.querySelector(".nav-search-container"),p=document.getElementById("navSearchToggle"),f=document.getElementById("navSearchDropdown");m&&p&&f&&(m.contains(d.target)||f.classList.remove("show"))});const l=document.getElementById("navSearchToggle"),c=document.getElementById("navSearchDropdown");l&&c&&l.addEventListener("click",d=>{var m;d.stopPropagation(),c.classList.toggle("show"),c.classList.contains("show")&&((m=document.getElementById("navSearchQuery"))==null||m.focus())})}else console.error("Navigation container #navigation-container not found.")}let u={};const g=["en","es","ru","zh"];let h=0;function w(e){document.documentElement.lang=e,localStorage.setItem("preferredLanguage",e),[...document.querySelectorAll("[data-translate]")].map(n=>{const o=n.getAttribute("data-translate"),i=u[o],r=i&&(i[e]||i.en)||o;if(r)if(n.tagName==="INPUT"&&n.placeholder!==void 0&&(o.includes(".placeholder")||o.endsWith("Placeholder")))n.placeholder=r;else if(n.tagName==="BUTTON"||n.classList.contains("timezone-toggle-floating")){const l=n.querySelector("i"),c=n.querySelector("span[data-translate]");c&&c.getAttribute("data-translate")===o?c.textContent=r:l?n.innerHTML=`${l.outerHTML} ${r}`:n.textContent=r}else{const l=n.firstChild;l&&l.nodeType===Node.ELEMENT_NODE&&l.tagName==="I"?n.innerHTML=`${l.outerHTML} ${r}`:n.textContent=r}});const a=document.getElementById("animatedLangBtn");if(a){const n=a.querySelector("i.fa-globe"),o=n?`${n.outerHTML} `:"";a.innerHTML=`${o}${e.toUpperCase()}`}const s=g.indexOf(e);s!==-1&&(h=s),window.AlphaStrike&&typeof window.AlphaStrike.onLanguageChangeRenderContent=="function"&&(console.log("Calling window.AlphaStrike.onLanguageChangeRenderContent() due to language change."),window.AlphaStrike.onLanguageChangeRenderContent())}function O(){h=(h+1)%g.length;const e=g[h];w(e)}function B(){const e=document.getElementById("animatedLangBtn");if(e){const t=localStorage.getItem("preferredLanguage")||g[0],a=e.querySelector("i.fa-globe"),s=a?`${a.outerHTML} `:'<i class="fas fa-globe"></i> ';e.innerHTML=`${s}${t.toUpperCase()}`,e.addEventListener("click",O)}else console.warn("#animatedLangBtn not found during language switcher initialization.")}async function R(){try{let e="";window.location.pathname.includes("/pages/")?e="../":(window.location.pathname.endsWith("/")||window.location.pathname.endsWith(".html"))&&(e="./");const t=await fetch(`${e}localization/translations.json`);if(!t.ok)throw new Error(`HTTP error! status: ${t.status} for translations.json at ${e}localization/translations.json`);u=await t.json(),console.log("Translations loaded successfully.")}catch(e){console.error("Failed to load translations:",e),u={"error.loading":{en:"Error loading translations",es:"Error al cargar las traducciones",ru:"Ошибка загрузки переводов",zh:"加载翻译时出错"}}}}document.addEventListener("DOMContentLoaded",async()=>{await R();const e=localStorage.getItem("preferredLanguage")||g[0],t=g.indexOf(e);t!==-1?h=t:h=0,w(g[h])});class F{constructor(){this.observer=null,this.init()}init(){"IntersectionObserver"in window?(console.log("LazyLoader: IntersectionObserver is supported"),this.observer=new IntersectionObserver(t=>{t.forEach(a=>{if(a.isIntersecting){const s=a.target;s.dataset.src&&(console.log("LazyLoader: Loading image",s.dataset.src),s.src=s.dataset.src,s.removeAttribute("data-src")),this.observer.unobserve(s)}})},{rootMargin:"50px 0px",threshold:.01})):console.log("LazyLoader: IntersectionObserver not supported, using fallback")}addLazyLoading(t,a){this.observer?(console.log("LazyLoader: Setting up lazy loading for",a),t.dataset.src=a,t.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",this.observer.observe(t)):(console.log("LazyLoader: Using fallback loading for",a),t.src=a)}addLazyLoadingToImages(t){t.forEach(a=>{console.log("Adding lazy loading to image",a.dataset.src),a.dataset.src&&(this.addLazyLoading(a,a.dataset.src),console.log("Added lazy loading to image",a.dataset.src))})}testLazyLoading(){const t={intersectionObserverSupported:"IntersectionObserver"in window,observerInitialized:this.observer!==null,imagesObserved:0};if(this.observer){const a=document.querySelectorAll("img[data-src]");t.imagesObserved=a.length}return console.log("Lazy Loading Test Results:",t),t.intersectionObserverSupported&&t.observerInitialized}}const E=new F;window.testLazyLoading=()=>E.testLazyLoading();let v=!0;function x(e,t=!0){let a;if(typeof e=="string")a=new Date(e);else if(typeof e=="number")if(e<1e10)a=new Date(e*1e3);else if(e<1e13)a=new Date(e);else{const m=e/1e4-116444736e5;a=new Date(m)}if(!a||Number.isNaN(a.getTime())||a.getFullYear()>2100||a.getFullYear()<1970)return console.warn("Invalid timestamp:",e),"INVALID TIMESTAMP";if(t){const c=a.getFullYear(),d=String(a.getMonth()+1).padStart(2,"0"),m=String(a.getDate()).padStart(2,"0"),p=String(a.getHours()).padStart(2,"0"),f=String(a.getMinutes()).padStart(2,"0"),L=String(a.getSeconds()).padStart(2,"0"),b=a.toLocaleTimeString("en-US",{timeZoneName:"short"}).split(" ")[2];return`${c}.${d}.${m} - ${p}:${f}:${L} ${b}`}const s=a.getUTCFullYear(),n=String(a.getUTCMonth()+1).padStart(2,"0"),o=String(a.getUTCDate()).padStart(2,"0"),i=String(a.getUTCHours()).padStart(2,"0"),r=String(a.getUTCMinutes()).padStart(2,"0"),l=String(a.getUTCSeconds()).padStart(2,"0");return`${s}.${n}.${o} - ${i}:${r}:${l} UTC`}function W(){v=!v;const e=document.documentElement.lang||(typeof g<"u"?g[0]:"en");[...document.querySelectorAll(".timestamp-value")].map(n=>{const o=n.closest(".incident-list-item");o!=null&&o.dataset.timestamp&&(n.textContent=x(typeof o.dataset.timestamp=="string"&&!Number.isNaN(o.dataset.timestamp)?Number(o.dataset.timestamp):o.dataset.timestamp,v))});const a=document.getElementById("timezone-toggle");if(a){const n=a.querySelector("span[data-translate]");if(n){const o=v?"timezone.showUtc":"timezone.showLocal";n.setAttribute("data-translate",o);const i=u[o],r=i?i[e]:void 0;r?n.textContent=r:(n.textContent=i?i.en:o,console.warn(`Translation not found for key: ${o}, lang: ${e}. Using fallback.`))}}[...document.querySelectorAll(".timestamp-group .detail-label")].map(n=>{const o=v?"card.localTimeLabel":"card.utcTimeLabel";if(n.setAttribute("data-translate",o),typeof u<"u"&&u[o]&&u[o][e])n.textContent=u[o][e];else{let i=o.replace("card.","").replace("Label","");i=`${i.charAt(0).toUpperCase()+i.slice(1)} TIME:`,n.textContent=i,console.warn(`Translation not found for key: ${o}, lang: ${e}. Using fallback.`)}}),window.AlphaStrike&&typeof window.AlphaStrike.onLanguageChangeRenderContent=="function"&&(console.log("ToggleTimezone: Calling page-specific render function."),window.AlphaStrike.onLanguageChangeRenderContent())}function K(e){let t;if(typeof e=="string")t=new Date(e);else if(typeof e=="number")if(e<1e10)t=new Date(e*1e3);else if(e<1e13)t=new Date(e);else{const c=e/1e4-116444736e5;t=new Date(c)}if(!t||Number.isNaN(t.getTime())||t.getFullYear()>2100||t.getFullYear()<1970)return"";const s=new Date-t;if(s<0)return"";const n=Math.floor(s/(1e3*60*60*24)),o=Math.floor(s%(1e3*60*60*24)/(1e3*60*60)),i=Math.floor(s%(1e3*60*60)/(1e3*60));return n>0?`${n}d ${o}h ago`:o>0?`${o}h ${i}m ago`:i>0?`${i}m ago`:"Just now"}function j(e){if(!e||typeof e!="object")return console.warn("Invalid item passed to createIncidentCard:",e),null;if(e.id===void 0||e.id===null)return console.warn("Skipping card creation for item missing 'id':",e),null;if(!e.killer_name&&!e.victim_name&&!e.loss_type&&!e.solar_system_name&&!e.time_stamp)return console.warn("Skipping card creation for effectively empty item:",e),null;const a=document.createElement("div");a.className="incident-list-item",a.dataset.timestamp=e.time_stamp;const s=document.createElement("img");s.className="profile-image",s.alt=`Killer ${e.killer_name||"Unknown"}`,s.dataset.src="../assets/images/default-avatar.avif",E.addLazyLoading(s,s.dataset.src);const n=document.createElement("img");n.className="profile-image",n.alt=`Victim ${e.victim_name||"Unknown"}`,n.dataset.src="../assets/images/default-avatar.avif",E.addLazyLoading(n,n.dataset.src);const i=window.location.pathname.endsWith("index.html")||window.location.pathname==="/"||window.location.pathname.endsWith("/Alpha-Strike-Main/")?"pages/":"",r=e.time_stamp?x(e.time_stamp,v):"N/A",l=e.time_stamp?K(e.time_stamp):"",c=v?"card.localTimeLabel":"card.utcTimeLabel",d=localStorage.getItem("preferredLanguage")||"en";function m(C,k={},P=""){var N,A;let S=P;typeof u<"u"&&((N=u[C])!=null&&N[d])?S=u[C][d]:typeof u<"u"&&((A=u[C])!=null&&A.en)&&(S=u[C].en);for(const D in k)S=S.replace(`{${D}}`,k[D]);return S}const p=e.killer_name||"UNKNOWN",f=e.victim_name||"UNKNOWN",L=e.solar_system_name||"UNKNOWN";let b="";const $=e.id,I=m("tooltip.viewKillmailDetails",{killmailId:$},`View details for killmail ${$}`);return b=`
      <div class="incident-detail-link-container">
          <a href="${i}killmail.html?mail_id=${encodeURIComponent($)}"
             class="view-killmail-details-link icon-only-link"
             aria-label="${I}"
             title="${I}">
             <i class="fa-sharp fa-solid fa-arrow-up-right-from-square"></i>
          </a>
      </div>
  `,a.innerHTML=`
        <div class="incident-photos">
            <div class="photo-container killer-photo">
                <img src="${s.dataset.src}" alt="Aggressor" class="combatant-photo"/>
            </div>
            <div class="vs-indicator"><i class="fas fa-bolt"></i></div>
            <div class="photo-container victim-photo">
                <img src="${n.dataset.src}" alt="Victim" class="combatant-photo"/>
            </div>
        </div>
        <div class="incident-combatants">
            <div class="combatant-info killer-info">
                <span class="combatant-label" data-translate="card.aggressor"></span>
                <span class="combatant-name killer clickable-name" data-name="${p}" title="${m("tooltip.searchFor",{itemName:p},`Search for ${p}`)}">${p}<i class="fa-sharp fa-solid fa-arrow-up-right-from-square"></i></span>
            </div>
            <div class="combatant-info victim-info">
                <span class="combatant-label" data-translate="card.casualty"></span>
                <span class="combatant-name victim clickable-name" data-name="${f}" title="${m("tooltip.searchFor",{itemName:f},`Search for ${f}`)}">${f}<i class="fa-sharp fa-solid fa-arrow-up-right-from-square"></i></span>
            </div>
        </div>
        <div class="incident-details-compact">
            <div class="detail-group">
                <span class="detail-label" data-translate="card.lossType"></span>
                <span class="detail-value">${e.loss_type||"CLASSIFIED"}</span>
            </div>
            <div class="detail-group">
                <span class="detail-label" data-translate="card.location"></span>
                <span class="detail-value clickable-system" data-system="${L}" title="${m("tooltip.searchFor",{itemName:L},`Search for ${L}`)}">${L}<i class="fa-sharp fa-solid fa-arrow-up-right-from-square"></i></span>
            </div>
        </div>
        <div class="incident-timestamp">
            <div class="timestamp-group">
                <span class="detail-label timestamp-label" data-translate="${c}"></span>
                <span class="timestamp-value">${r}</span>
                ${l?`<span class="time-elapsed">${l}</span>`:""}
            </div>
        </div>
        ${b}
    `,a}function U(e,t){if(!e||e==="UNKNOWN"||e==="CLASSIFIED"){console.warn("Cannot search for empty, unknown, or classified values");return}const n=`${window.location.pathname.endsWith("index.html")||window.location.pathname==="/"||window.location.pathname.endsWith("/Alpha-Strike-Main/")?"pages/search.html":window.location.pathname.includes("/pages/")?"search.html":"../pages/search.html"}?query=${encodeURIComponent(e)}&type=${t}`;window.location.href=n}function T(){for(const e of document.querySelectorAll(".clickable-name"))e.dataset.listenerAttached||(e.addEventListener("click",t=>{t.preventDefault();const a=e.dataset.name;a&&a!=="UNKNOWN"&&U(a,"name")}),e.dataset.listenerAttached="true");for(const e of document.querySelectorAll(".clickable-system"))e.dataset.listenerAttached||(e.addEventListener("click",t=>{t.preventDefault();const a=e.dataset.system;a&&a!=="UNKNOWN"&&U(a,"system")}),e.dataset.listenerAttached="true")}async function y(e){try{const t=await fetch(e);if(!t.ok)throw new Error(`HTTP error! Status: ${t.status}`);return await t.json()}catch(t){throw console.error("Error fetching data:",t),t}}async function ce(){return await y("https://api.alpha-strike.space/incident?filter=month")}async function le(e){return await y(`https://api.alpha-strike.space/incident?mail_id=${e}`)}async function V(e,t){const a=t==="system"?`https://api.alpha-strike.space/incident?system=${encodeURIComponent(e)}`:`https://api.alpha-strike.space/incident?name=${encodeURIComponent(e)}`;return await y(a)}async function de(e="month"){return await y(`https://api.alpha-strike.space/totals?filter=${e}`)}async function me(e="week"){return await y(`https://api.alpha-strike.space/totals?filter=${e}`)}async function pe(e="day"){return await y(`https://api.alpha-strike.space/totals?filter=${e}`)}async function Y(e,t){const a=t==="system"?`https://api.alpha-strike.space/totals?system=${encodeURIComponent(e)}`:`https://api.alpha-strike.space/totals?name=${encodeURIComponent(e)}`;return await y(a)}const z=(e,t="")=>{var s,n;const a=g[h];return((s=u[e])==null?void 0:s[a])||((n=u[e])==null?void 0:n.en)||t};function Q(e){const t=e.total_losses>0?(e.total_kills/e.total_losses).toFixed(2):e.total_kills||0,a=(e.total_kills||0)+(e.total_losses||0),s=a>0?((e.total_kills||0)/a*100).toFixed(1):0;return{killDeathRatio:t,totalEngagements:a,winRate:s}}function q(e,t){const a=document.createElement("div");a.className="card-header";const s=document.createElement("div");s.className="profile-section";const n=document.createElement("div");n.className="profile-image-container";const o=document.createElement("img");o.className="profile-image",o.alt=`${e.name}'s profile`,o.src=e.image||"../assets/images/default-avatar.avif",n.appendChild(o);const i=document.createElement("div");i.className="profile-info";const r=document.createElement("h2");r.className="player-name",r.textContent=e.name;const l=document.createElement("p");l.className="player-status",l.textContent=e.status||z("general.unknown"),i.appendChild(r),i.appendChild(l),s.appendChild(n),s.appendChild(i);const c=document.createElement("div");c.className="header-stats";const d=document.createElement("div");d.className="header-stat",d.innerHTML=`
        <div class="header-stat-value ${t.killDeathRatio>1?"killer":"victim"}">${t.killDeathRatio}</div>
        <div class="header-stat-label" data-translate="card.kdRatio">K/D Ratio</div>
    `;const m=document.createElement("div");m.className="header-stat",m.innerHTML=`
        <div class="header-stat-value">${t.winRate}%</div>
        <div class="header-stat-label" data-translate="card.winRate">Win Rate</div>
    `;const p=document.createElement("div");return p.className="header-stat",p.innerHTML=`
        <div class="header-stat-value">${t.totalEngagements}</div>
        <div class="header-stat-label" data-translate="card.totalEngagements">Total Engagements</div>
    `,c.appendChild(d),c.appendChild(m),c.appendChild(p),a.appendChild(s),a.appendChild(c),a}function G(e){const t=e.incident_count&&e.days_active?(e.incident_count/e.days_active).toFixed(1):"< 1",a=e.incident_count>100?"HIGH":e.incident_count>50?"MEDIUM":"LOW";return{avgIncidentsPerDay:t,threatLevel:a,threatClass:a==="HIGH"?"threat-high":a==="MEDIUM"?"threat-medium":"threat-low",totalIncidents:e.incident_count||0,activeDays:e.days_active||0}}function Z(e,t){const a=document.createElement("div");a.className="card-header";const s=document.createElement("div");s.className="system-section";const n=document.createElement("div");n.className="system-image-container";const o=document.createElement("img");o.className="system-image",o.alt=`${e.solar_system_name||e.name} system`,o.dataset.src="https://images.evetech.net/types/3796/render",n.appendChild(o);const i=document.createElement("div");i.className="system-info";const r=document.createElement("h2");r.className="system-name",r.textContent=e.solar_system_name||e.name;const l=document.createElement("p");l.className="system-region",l.textContent=e.region_name||e.region||z("general.unknown"),i.appendChild(r),i.appendChild(l),s.appendChild(n),s.appendChild(i);const c=document.createElement("div");c.className="header-stats";const d=document.createElement("div");d.className="header-stat",d.innerHTML=`
        <div class="header-stat-value ${t.threatClass}">${t.totalIncidents}</div>
        <div class="header-stat-label" data-translate="card.incidents">Incidents</div>
    `;const m=document.createElement("div");m.className="header-stat",m.innerHTML=`
        <div class="header-stat-value">${t.avgIncidentsPerDay}</div>
        <div class="header-stat-label" data-translate="card.avgPerDay">Per Day</div>
    `;const p=document.createElement("div");return p.className="header-stat",p.innerHTML=`
        <div class="header-stat-value">${t.activeDays}</div>
        <div class="header-stat-label" data-translate="card.activeDays">Active Days</div>
    `,c.appendChild(d),c.appendChild(m),c.appendChild(p),a.appendChild(s),a.appendChild(c),a}function J(e){const t=document.createElement("div");t.className="data-card enhanced-player-card",t.dataset.id=e.id;const a=Q(e),s=q(e,a);return t.appendChild(s),t}function X(e){const t=document.createElement("div");t.className="data-card enhanced-system-card",t.dataset.id=e.id;const a=G(e),s=Z(e,a);t.appendChild(s);const n=t.querySelector(".system-image");return n&&E.addLazyLoading(n,"https://images.evetech.net/types/3796/render"),t}function ee(e,t){const a=document.getElementById("totals-card");if(a.innerHTML="",!e||e.length===0){a.innerHTML='<p data-translate="search.noAggregatedData">No aggregated data found.</p>';return}const s=e[0],n=t==="system"?X(s):J(s);a.appendChild(n)}function H(){const e=new URLSearchParams(window.location.search);return{query:e.get("query"),type:e.get("type")}}function te(){const e=document.getElementById("navSearchBtn"),t=document.getElementById("navSearchQuery"),a=document.getElementById("navSearchType");!e||!t||!a||(e.addEventListener("click",()=>{const s=t.value.trim();if(s===""){alert("Please enter a search query.");return}ae(s,a.value)}),t.addEventListener("keypress",s=>{s.key==="Enter"&&e.click()}))}function ae(e,t){const a=`/pages/search.html?query=${encodeURIComponent(e)}&type=${t}`;window.location.href=a}function ne(e,t){return!e||!e.trim()?[]:(e=e.trim(),t==="system"?[e.toUpperCase()]:e===e.toLowerCase()?[e,e.toUpperCase(),e.charAt(0).toUpperCase()+e.slice(1)]:e===e.toUpperCase()?[e,e.toLowerCase(),e.charAt(0).toLowerCase()+e.slice(1)]:[e,e.toLowerCase(),e.toUpperCase()])}async function se(e){const{type:t}=H(),a=t||"name",s=document.getElementById("results-container"),n=document.getElementById("totals-card");if(!(!s||!n)){s.innerHTML='<p data-translate="search.loading">Loading...</p>',n.innerHTML="";try{const o=ne(e,a);let i=[],r=[];for(const l of o)try{const[c,d]=await Promise.all([V(l,a),Y(l,a)]);if(c&&c.length>0){i=c,r=d||[];break}}catch{}i.length>0?(ee(r,a),oe(i)):s.innerHTML='<p data-translate="search.noResults">No results found.</p>'}catch(o){console.error("Error fetching search data:",o),s.innerHTML='<p data-translate="search.error">Error loading search results.</p>'}if(typeof setLanguage=="function"){const o=localStorage.getItem("preferredLanguage")||"en";setLanguage(o)}}}function oe(e){const t=document.getElementById("results-container");if(t){if(t.innerHTML="",!e||e.length===0){t.innerHTML='<p data-translate="search.noResults">No results found.</p>';return}e.forEach(a=>{const s=j(a);s&&t.appendChild(s)}),typeof T=="function"&&T()}}function _(){te();const{query:e}=H();if(e&&se(decodeURIComponent(e)),typeof setLanguage=="function"){const t=localStorage.getItem("preferredLanguage")||"en";setLanguage(t)}}document.addEventListener("DOMContentLoaded",()=>{ie("search"),_()});function ie(e){if(typeof M=="function")M(e);else{console.error("initializeNavigation function is not defined. Ensure components/navigation.js is loaded.");return}typeof B=="function"?B():console.error("initializeLanguageSwitcher function not found. Ensure translation-dictionary.js is loaded correctly and defines it.");const t=document.getElementById("timezone-toggle");if(t&&(t.hasAttribute("data-listener-attached")||(t.addEventListener("click",W),t.setAttribute("data-listener-attached","true"))),typeof w=="function"&&typeof g<"u"&&g.length>0){const a=localStorage.getItem("preferredLanguage")||g[0];w(a)}else console.error("setLanguage function or languages array not found. Translation system might not be fully initialized.");_()}function ue(e,t,a,s={}){const n=document.getElementById(t);if(!n){console.error(`Container with ID ${t} not found`);return}if(n.innerHTML="",!e||e.length===0){n.textContent=s.noDataMessage||"No data available.";return}s.sortBy&&s.sortDirection&&e.sort((i,r)=>{const l=i&&typeof i=="object"&&Object.prototype.hasOwnProperty.call(i,s.sortBy)?i[s.sortBy]:void 0,c=r&&typeof r=="object"&&Object.prototype.hasOwnProperty.call(r,s.sortBy)?r[s.sortBy]:void 0;if(l==null)return s.sortDirection==="desc"?1:-1;if(c==null)return s.sortDirection==="desc"?-1:1;let d=0;return l>c?d=1:l<c&&(d=-1),s.sortDirection==="desc"?d*-1:d});let o=e;if(s.limit&&(o=e.slice(0,s.limit)),[...o].map(i=>{const r=a(i);r?n.appendChild(r):console.warn("Skipping invalid card for item:",i)}),typeof T=="function"&&T(),typeof w=="function"&&typeof g<"u"&&g.length>0){const i=localStorage.getItem("preferredLanguage")||g[0];w(i)}}export{g as a,le as b,j as c,ue as d,T as e,ce as f,h as g,x as h,ie as i,v as j,pe as k,R as l,me as m,de as n,U as o,w as s,u as t};
